#!/bin/sh
#
# This file is released under the terms of the Artistic License.
# Please see the file LICENSE, included in this package, for details.
#
# Copyright (C) 2002-2008 Open Source Development Labs, Inc.
#               2002-2014 Mark Wong
#               2014      2ndQuadrant, Ltd.
#

DIR=`dirname $0`
. ${DIR}/pgsql_profile || exit 1

DBNAME=$SID

if [ "x${DBNAME}" = "x" ]; then
    echo "DBNAME not defined."
    exit 1
fi

while getopts "d:l:" OPT; do
	case ${OPT} in
	l)
		PORT=${OPTARG}
		;;
	esac
done

if [ ! "x${PORT}" = "x" ]; then
	PORTARG="-p ${PORT}"
fi
PSQL="psql -X ${PORTARG} -d ${DBNAME}"

# need to consider table dependencies.
${PSQL} -c "DROP TABLE IF EXISTS supplier CASCADE;"
${PSQL} -c "DROP TABLE IF EXISTS part CASCADE;"
${PSQL} -c "DROP TABLE IF EXISTS partsupp CASCADE;"
${PSQL} -c "DROP TABLE IF EXISTS customer CASCADE;"
${PSQL} -c "DROP TABLE IF EXISTS orders CASCADE;"
${PSQL} -c "DROP TABLE IF EXISTS lineitem CASCADE;"
${PSQL} -c "DROP TABLE IF EXISTS nation CASCADE;"
${PSQL} -c "DROP TABLE IF EXISTS region CASCADE;"
${PSQL} -c "DROP TABLE IF EXISTS time_statistics;"
