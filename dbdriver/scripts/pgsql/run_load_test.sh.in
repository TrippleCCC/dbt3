#
# run_load_test.sh: run dbt3 load test
#
# This file is released under the terms of the Artistic License.  Please see
# the file LICENSE, included in this package, for details.
#
# Copyright (C) 2003 Open Source Development Lab, Inc.
#
# History: June-17-2003 Created by Jenny Zhang
#
#!/bin/sh

if [ $# -lt 4 ]; then
        echo "Usage: $0 <scale_factor> <db_param> <redirect_tmp> <redirect_xlog>"
        exit
fi

scale_factor=$1
db_param=$2
redirect_tmp=1
redirect_xlog=1

GTIME="@TOPDIR@/dbdriver/utils/gtime"

#***load test
echo "`date +'%Y-%m-%d %H:%M:%S'` start load test" 
#get the start time
s_time=`$GTIME`
@TOPDIR@/scripts/pgsql/build_db.sh "$db_param" -r $redirect_tmp -x $redirect_xlog > @TOPDIR@/run/build_db.log
e_time=`$GTIME`
echo "`date +'%Y-%m-%d %H:%M:%S'` load test end" 
let "diff_time=$e_time-$s_time"
echo "elapsed time for load test $diff_time" 
